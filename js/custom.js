!async function(){function e(e){async function t(e){const t=document.querySelector(".postAI-content");return new Promise((e=>{if(!t)throw new Error("Element not found");let n=t.innerText,o=n.length;if(0==o)return e();!function r(){o>=0?(t.innerText=n.slice(0,o--),setTimeout(r,20)):setTimeout(e,800)}()})).then((()=>new Promise((n=>{let o=0,r=performance.now();document.querySelector(".postAI-icon svg").classList.add("jump");const a=()=>{if(o<e.length){const i=performance.now(),s=i-r,c=e.slice(o,o+1);s>=(/[，。！、？,.!?]/.test(c)?150:25)&&(r=i,o++,o<e.length?t.innerText=e.slice(0,o):(t.innerText=e,document.querySelector(".postAI-icon svg").classList.remove("jump"),n())),requestAnimationFrame(a)}};requestAnimationFrame(a)})))).catch()}!function(){!function(){const e=document.querySelector(".postAI-box");e&&e.parentElement.removeChild(e)}();let t=document.createElement("div");t.className="postAI-box",t.innerHTML='\n        <div class="postAI-icon"><svg t="1714137053863" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7326" width="200" height="200">\n        <path d="M541.866667 761.002667a107.136 107.136 0 0 1-68.608-24.874667c1.152-0.597333 2.304-1.28 3.413333-1.92l114.048-65.877333a18.56 18.56 0 0 0 9.386667-16.128v-160.896l48.213333 27.818666a1.706667 1.706667 0 0 1 0.938667 1.322667v133.205333a107.52 107.52 0 0 1-107.264 107.349334H541.866667z" p-id="7327" fill="#000000"></path>\n        <path d="M298.538667 590.506667a107.136 107.136 0 0 0 105.813333 125.568 107.52 107.52 0 0 0 53.632-14.336l115.285333-66.56a1.706667 1.706667 0 0 0 0.725334-1.365334v-55.808l-139.264 80.426667a18.56 18.56 0 0 1-18.773334 0l-114.048-65.877333-3.413333-2.005334z" p-id="7328" fill="#000000"></path>\n        <path d="M337.194667 366.378667a107.008 107.008 0 0 0-55.893334 47.104 107.434667 107.434667 0 0 0 39.296 146.56l115.328 66.645333a1.706667 1.706667 0 0 0 1.621334-0.170667l48.213333-27.818666-139.264-80.426667a18.517333 18.517333 0 0 1-9.344-16.085333V370.346667l0.042667-3.968zM538.197333 425.258667l48.213334-27.861334a1.706667 1.706667 0 0 1 1.578666-0.170666l115.328 66.56a107.434667 107.434667 0 0 1-16.597333 193.792v-135.893334a18.56 18.56 0 0 0-9.301333-16.042666l-139.221334-80.384z" p-id="7329" fill="#000000"></path>\n        <path d="M722.048 431.36L608 365.568a18.602667 18.602667 0 0 0-18.773333 0l-139.264 80.384V390.144a1.706667 1.706667 0 0 1 0.725333-1.408l115.285333-66.517333a107.392 107.392 0 0 1 159.445334 111.189333 167.893333 167.893333 0 0 0-3.413334-2.005333z" p-id="7330" fill="#000000"></path>\n        <path d="M375.552 504.832l48.213333 27.818667 0.085334-160.853334a18.56 18.56 0 0 1 9.386666-16.128l114.090667-65.877333c1.109333-0.682667 2.218667-1.28 3.370667-1.92A107.349333 107.349333 0 0 0 374.613333 370.304V503.466667a1.706667 1.706667 0 0 0 0.938667 1.322666z" p-id="7331" fill="#000000"></path>\n        <path d="M512 440.32l-62.037333 35.84v71.637333l62.037333 35.797334 61.994667-35.84V476.16L512 440.32z" p-id="7332" fill="#000000"></path>\n        <path d="M512 1024c282.752 0 512-229.248 512-512S794.752 0 512 0 0 229.248 0 512s229.248 512 512 512z m245.333333-563.968a142.890667 142.890667 0 0 0-12.245333-117.205333 144.384 144.384 0 0 0-155.477333-69.290667 142.72 142.72 0 0 0-106.709334-47.957333h-1.28A144.384 144.384 0 0 0 344.32 325.504 142.762667 142.762667 0 0 0 248.874667 394.666667a144.426667 144.426667 0 0 0 17.749333 169.301333 142.805333 142.805333 0 0 0 12.245333 117.205333 144.384 144.384 0 0 0 155.434667 69.248 142.72 142.72 0 0 0 106.752 48h1.28a144.341333 144.341333 0 0 0 137.386667-100.010666 142.72 142.72 0 0 0 95.402666-69.248 144.213333 144.213333 0 0 0-17.792-169.173334z" p-id="7333" fill="#000000"></path>\n        </svg></div>\n        <div class="talk-container"><div class="postAI-talk"><span class="postAI-content"></span><span class="blinking-cursor"></span></div></div>\n        ',e.insertBefore(t,e.firstChild)}(),t("点击即可生成AI摘要哦~"),document.querySelector(".postAI-icon").addEventListener("click",(async function n(){document.querySelector(".postAI-icon").removeEventListener("click",n),await t("正在为您生成AI摘要，请稍候......"),setTimeout((()=>{PAGE_CONFIG.ai_text?t(PAGE_CONFIG.ai_text).then((()=>{PAGE_CONFIG.ai_text?document.querySelector(".postAI-icon").addEventListener("click",n):document.querySelector(".blinking-cursor").style.display="none"})):async function(e){const t=`https://summary.tianli0.top/?content=${e}&key=a3AQwYShHwBlEWxo0zxl&url=${location.pathname}&title=${document.title}`;try{const e=await fetch(t);if(e.ok)return{code:0,data:(await e.json()).summary};throw new Error("摘要获取失败。")}catch(e){return"AbortError"===e.name?"localhost"===window.location.hostname?{code:1,data:"获取文章摘要超时。请勿在本地主机上测试 API 密钥。"}:{code:1,data:"获取文章摘要超时。当你出现这个问题时，可能是key或者绑定的域名不正确。也可能是因为文章过长导致的 AI 运算量过大，您可以稍等一下然后刷新页面重试。"}:{code:1,data:"获取文章摘要失败，请稍后再试。"}}}(function(){try{if(!e)return console.warn("找不到文章容器。"),"";const t=e.getElementsByTagName("p"),n=e.querySelectorAll("h1, h2, h3, h4, h5");let o="";for(let e of n)o+=e.innerText.replaceAll("&","以及")+" ";for(let e of t)o+=e.innerText.replace(/https?:\/\/[^\s]+/g,"");let r=1e3;return"undefined"!=typeof postAI_wordLimit&&(r=postAI_wordLimit),(document.title+" "+o).slice(0,r)}catch(e){return console.error("获取文章内容失败：",e),""}}()).then((e=>{t(e.data.replaceAll("作者","博主")).then((()=>{e.code?document.querySelector(".postAI-icon").addEventListener("click",n):document.querySelector(".blinking-cursor").style.display="none"}))}))}),1e3)}))}function t(){let t=document.querySelector("#post #article-container");t&&e(t)}window.addEventListener("DOMContentLoaded",(()=>{t(),document.addEventListener("pjax:complete",t)}))}();var btwoa={getIpInfo:function(){fetch("https://api.qjqq.cn/api/Local").then((e=>e.json())).then((e=>{var t=e.ip,n=e.data.country,o=e.data.prov,r=e.data.city,a=e.data.district,i=e.data.radius,s=Math.floor(i),c=e.data.isp;document.getElementById("userAgentIp").innerHTML=t,document.getElementById("userAgentCountry").innerHTML=n,document.getElementById("userAgentProv").innerHTML=o,document.getElementById("userAgentCity").innerHTML=r,document.getElementById("userAgentDistrict").innerHTML=a,document.getElementById("userAgentRadius").innerHTML=s+"公里",document.getElementById("userAgentISP").innerHTML=c;var l=(new UAParser).getResult();document.getElementById("userAgentOS").innerHTML=l.os.name+" "+l.os.version,document.getElementById("userAgentBrowser").innerHTML=l.browser.name+" "+l.browser.version}))}};let newYearTimer=null;var newYear=()=>{if(clearTimeout(newYearTimer),!document.querySelector("#newYear"))return;let e=new Date("2025-01-29 00:00:00").getTime()/1e3,t={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"};function n(e){return e>9?e:"0"+e}!function o(){let r=new Date;document.querySelector("#newYear .today").innerHTML=r.getFullYear()+"年"+(r.getMonth()+1)+"月"+r.getDate()+"日 "+t[r.getDay()];let a=e-Math.round(r.getTime()/1e3);if(a<0)document.querySelector("#newYear .title").innerHTML="喜迎新年",document.querySelector("#newYear .newYear-time").innerHTML='<span class="happyNewYear">新年快乐！</span>';else if(document.querySelector("#newYear .title").innerHTML="距离2025年春节：",a>86400)document.querySelector("#newYear .newYear-time").innerHTML=`<span class="day">${Math.ceil(a/86400)}<span class="unit">天</span></span>`;else{let e=n(parseInt(a/3600));a%=3600;let t=n(parseInt(a/60));a%=60;let r=n(a);document.querySelector("#newYear .newYear-time").innerHTML=`<span class="time">${e}:${t}:${r}</span></span>`,newYearTimer=setTimeout(o,1e3)}}()};newYear(),document.addEventListener("pjax:complete",newYear),document.addEventListener("DOMContentLoaded",(function(){async function e(){const e=document.getElementById("history-container");if(!e)return;const t=(await async function(){const e=new Date,t="S"+`${e.getMonth()+1}`.padStart(2,"0")+`${e.getDate()}`.padStart(2,"0"),n=`https://fastly.jsdelivr.net/gh/Zfour/Butterfly-card-history@2.08/baiduhistory/json/${e.getMonth()<10?"0"+(e.getMonth()+1):e.getMonth()+1}.json`,o=await fetch(n),r=await o.json();return r[t]}()).map((e=>`<div class="swiper-slide history_slide"><span class="history_slide_time">A.D.${e.year}</span><span class="history_slide_link">${e.title}</span></div>`)).join(""),n=document.querySelector(".history_swiper-container");document.getElementById("history_container_wrapper").innerHTML=t;const o=new Swiper(n,{loop:!0,direction:"vertical",autoplay:{disableOnInteraction:!0,delay:5e3},mousewheel:!1});e.onmouseenter=()=>o.autoplay.stop(),e.onmouseleave=()=>o.autoplay.start()}e(),document.addEventListener("pjax:complete",e)}));