const coverColor=()=>{const e=PAGE_CONFIG.color;if(e)return void setThemeColors(e);const o=document.getElementById("post-cover")?.src;o?handleApiColor(o):setDefaultThemeColors()},handleApiColor=e=>{const o=JSON.parse(localStorage.getItem("Solitude"))||{},t=o.postcolor?.[e]?.value;t?setThemeColors(t):img2color(e)},img2color=e=>{fetch(`${e}?imageAve`).then((e=>e.json())).then((({RGB:o})=>{o=`#${o.slice(2)}`,setThemeColors(o),cacheColor(e,o)})).catch(console.error)},setThemeColors=e=>{if(!e)return setDefaultThemeColors();const[o,t,r]=e.match(/\w\w/g).map((e=>parseInt(e,16))),[a,l,n,s]=[`${e}`,`${e}23`,`${e}dd`,`${e}00`];document.documentElement.style.setProperty("--ba-main",a),document.documentElement.style.setProperty("--ba-main-op",l),document.documentElement.style.setProperty("--ba-main-op-deep",n),document.documentElement.style.setProperty("--ba-main-none",s),adjustBrightness(o,t,r),document.getElementById("coverdiv").classList.add("loaded"),initThemeColor()},setDefaultThemeColors=()=>{["--ba-theme","--ba-theme-op","--ba-theme-op-deep","--ba-theme-none"].forEach(((e,o)=>document.documentElement.style.setProperty(["--ba-main","--ba-main-op","--ba-main-op-deep","--ba-main-none"][o],`var(${e})`))),initThemeColor()},cacheColor=(e,o)=>{const t=JSON.parse(localStorage.getItem("Solitude"))||{postcolor:{}};t.postcolor[e]={value:o,expiration:Date.now()+coverColorConfig.time},localStorage.setItem("Solitude",JSON.stringify(t))},adjustBrightness=(e,o,t)=>{Math.round((299*e+587*o+114*t)/1e3)<125&&(document.querySelectorAll(".card-content").forEach((e=>e.style.setProperty("--ba-card-bg","var(--ba-white)"))),document.querySelectorAll(".author-info__sayhi").forEach((e=>{e.style.setProperty("background","var(--ba-white-op)"),e.style.setProperty("color","var(--ba-white)")})))};